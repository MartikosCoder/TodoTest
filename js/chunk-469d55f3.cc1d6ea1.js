(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-469d55f3"],{1071:function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("section",{staticClass:"edit-page"},[e("div",{staticClass:"edit-page__todo"},[e("div",{staticClass:"edit-page__todo__title"},[e("input",{attrs:{type:"text",name:"title",id:"title"},domProps:{value:t.active_todo.title},on:{blur:t.saveTitle}})]),e("section",{staticClass:"todo__items-block"},[e("div",{staticClass:"edit-page__todo__new-item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.new_description,expression:"new_description"}],attrs:{type:"text",name:"new_item",id:"new_item",placeholder:"New task"},domProps:{value:t.new_description},on:{input:function(i){i.target.composing||(t.new_description=i.target.value)}}}),e("button",{staticClass:"good",on:{click:t.addNewItem}},[t._v("Add")])]),e("ul",{staticClass:"edit-page__todo__items-list"},t._l(t.active_todo.items,(function(t){return e("ItemEditor",{key:t.id,staticClass:"list-item",attrs:{id:t.id}})})),1)])]),e("div",{staticClass:"edit-page__controls flex"},[e("div",{staticClass:"controls__main"},[e("button",{staticClass:"controls__btn back",on:{click:function(i){return t.setConfirmation("discard")}}},[t._v("Back")]),e("button",{staticClass:"controls__btn danger",on:{click:function(i){return t.setConfirmation("remove")}}},[t._v("Remove")]),e("button",{staticClass:"controls__btn good",on:{click:t.updateTodo}},[t._v("Save")])]),e("div",{staticClass:"controls__additional"},[e("button",{staticClass:"controls__btn standard",on:{click:t.undo}},[t._v("Undo")]),e("button",{staticClass:"controls__btn standard",on:{click:t.redo}},[t._v("Redo")])])]),e("section",{staticClass:"modal",class:{flex:t.modal_is_opened}},[e("div",{staticClass:"modal_container flex"},[e("span",[t._v("Are you sure?")]),e("div",{staticClass:"modal_panel flex"},[e("button",{on:{click:t.discardCommand}},[t._v("No")]),e("button",{on:{click:t.acceptCommand}},[t._v("Yes")])])])])])},o=[],n=(e("e260"),e("fb6a"),e("e6cf"),e("ddb0"),e("5530")),a=e("2f62"),c={name:"Edit",props:{id:String},data(){return{new_description:"",command:null,modal_is_opened:!1,history:[],revision:0,is_moving:!1}},components:{ItemEditor:()=>e.e("chunk-2ff3870f").then(e.bind(null,"466e"))},computed:Object(n["a"])({},Object(a["c"])(["all_todos","active_todo"])),created(){this.setActive(+this.id)},watch:{active_todo:{handler(t){if(!this.is_moving){const i=JSON.parse(JSON.stringify(t));this.$set(this,"history",this.history.slice(0,this.revision)),this.history.push(i),this.$set(this,"revision",this.revision+1)}this.$set(this,"is_moving",!1)},deep:!0}},methods:Object(n["a"])({},Object(a["b"])(["setActive","changeTodo","removeTodo","updateActive","clearActive"]),{addNewItem(){if(this.new_description.length>0){const t=Math.max(...this.active_todo.items.map(t=>t.id));this.active_todo.items=[...this.active_todo.items,{id:t>0?t+1:1,checked:!1,description:this.new_description}],this.$set(this,"new_description","")}},goToMain(){this.$router.push("/")},updateTodo(){this.changeTodo(),this.goToMain()},setConfirmation(t){this.$set(this,"modal_is_opened",!0),this.$set(this,"command",t)},discardCommand(){this.$set(this,"command",""),this.$set(this,"modal_is_opened",!1)},acceptCommand(){switch(this.command){case"remove":this.removeTodo(this.active_todo.id);break;case"discard":this.clearActive();break}this.goToMain()},saveTitle(t){this.$set(this.active_todo,"title",t.target.value)},updater(){const t=Object(n["a"])({},this.history[this.revision-1]);this.updateActive(t)},undo(){this.revision>1&&(this.$set(this,"revision",this.revision-1),this.$set(this,"is_moving",!0),this.updater())},redo(){this.revision<this.history.length&&(this.$set(this,"revision",this.revision+1),this.$set(this,"is_moving",!0),this.updater())}})},d=c,r=(e("d572"),e("2877")),l=Object(r["a"])(d,s,o,!1,null,null,null);i["default"]=l.exports},d572:function(t,i,e){"use strict";var s=e("fea3"),o=e.n(s);o.a},fb6a:function(t,i,e){"use strict";var s=e("23e7"),o=e("861d"),n=e("e8b5"),a=e("23cb"),c=e("50c4"),d=e("fc6a"),r=e("8418"),l=e("b622"),h=e("1dde"),_=e("ae40"),v=h("slice"),m=_("slice",{ACCESSORS:!0,0:0,1:2}),u=l("species"),p=[].slice,f=Math.max;s({target:"Array",proto:!0,forced:!v||!m},{slice:function(t,i){var e,s,l,h=d(this),_=c(h.length),v=a(t,_),m=a(void 0===i?_:i,_);if(n(h)&&(e=h.constructor,"function"!=typeof e||e!==Array&&!n(e.prototype)?o(e)&&(e=e[u],null===e&&(e=void 0)):e=void 0,e===Array||void 0===e))return p.call(h,v,m);for(s=new(void 0===e?Array:e)(f(m-v,0)),l=0;v<m;v++,l++)v in h&&r(s,l,h[v]);return s.length=l,s}})},fea3:function(t,i,e){}}]);
//# sourceMappingURL=chunk-469d55f3.cc1d6ea1.js.map